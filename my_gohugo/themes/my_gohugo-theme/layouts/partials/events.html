
{{ $typeEvent := .Scratch.Get "typeEvent" }}

{{range ((where .Site.RegularPages "Section" "events").ByParam "when").Reverse }}
    {{ if eq $typeEvent "events" }}
        <div class="event-container" >
            <h2><a href="{{.Permalink}}"> {{ .Params.title}}</a> <br/></h2>
            <h3>{{ .Params.Label }}</h3>
            <h3>{{ dateFormat "02 January 2006" .Params.when }}</h3>
            {{ $permalink := .Permalink }}
            {{ range .Params.photos }}
                <a href="{{ $permalink }}">
                    <img src="{{ . }}" width="auto" height="200px">
                </a>
            {{ end }}
        </div>
    {{ end }}
    {{ if eq $typeEvent "upcoming" }}
        {{ if ge (dateFormat "2006-01-02" .Params.When) (dateFormat "2006-01-02" now) }}
            <div class="event-container" >
                <h2><a href="{{.Permalink}}"> {{ .Params.title}}</a> <br /></h2>
                <h3>{{ .Params.Label }}</h3>
                <h3>{{ dateFormat "02 January 2006" .Params.when }}</h3>
                {{ $permalink := .Permalink }}
                {{ range .Params.photos }}
                    <a href="{{ $permalink }}">
                        <img src="{{ . }}" width="auto" height="200px">
                    </a>
                {{ end }}
            </div>
        {{ end }}
    {{ end }}
    {{ if eq $typeEvent "archived" }}
        {{ if lt (dateFormat "2006-01-02" .Params.When) (dateFormat "2006-01-02" now) }}
            <div class="event-container" >
                <h2><a href="{{.Permalink}}"> {{ .Params.title}}</a> <br /></h2>
                <h3>{{ .Params.Label }}</h3>
                <h3>{{ dateFormat "02 January 2006" .Params.when }}</h3>
                {{ $permalink := .Permalink }}
                {{ range .Params.photos }}
                    <a href="{{ $permalink }}">
                        <img src="{{ . }}" width="auto" height="200px">
                    </a>
                {{ end }}
            </div>
        {{ end }}
    {{ end }}
{{ end }}